(this["webpackJsonpm-app-test2"]=this["webpackJsonpm-app-test2"]||[]).push([[0],{42:function(e,t,n){e.exports=n(72)},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),l=n(15),r=n.n(l),c=n(10),i=n(7),s=n(17),u=n(18),m=n(21),d=n(19),f=n(22),p=n(11),v=n(40),h=n(20),E=n(24),b=n.n(E),g=function(e){var t=e.type,n=e.className;return o.a.createElement("span",{className:"icon iconfont icon-".concat(t," ").concat(n||""),onClick:e.onClick})},y=n(26),S=n.n(y),k={login:"/api/login",listAll:"/api/list_all"};var j=function(e){var t;return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,S.a.awrap(b()(e));case 2:return t=n.sent,n.abrupt("return",t.data);case 4:case"end":return n.stop()}}))},N={login:function(e){return j({url:k.login,data:e,method:"post"})},getListAll:function(){return j({url:k.listAll})}},O=n(14),I=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(d.a)(t).call(this,e))).state={username:"admin",password:"123456",visible:!1},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"handleInput",value:function(e,t){console.log(e),this.setState(Object(h.a)({},t,e.target.value))}},{key:"handleKeyUp",value:function(e){console.log(e),13===e.keyCode&&this.handleLogin()}},{key:"handelVisible",value:function(){var e=this.state.visible;this.setState({visible:!e})}},{key:"handleLogin",value:function(){var e=this,t=this.state,n=t.username,a=t.password;N.login({username:n,password:a}).then((function(t){200===t.code?e.props.history.push("/index/home"):400===t.code&&alert(t.message)}))}},{key:"componentDidMount",value:function(){console.log("immutable");var e={a:{b:1},c:2},t=JSON.parse(JSON.stringify(e));t.a.b=2,console.log("obj:",e),console.log("obj2:",t);var n=Object(v.a)({},e);n.c=3,console.log("obj:",e),console.log("obj3:",n),n.a.b=4,console.log("obj:",e),console.log("obj3:",n);var a=Object(O.a)({c:{d:1},e:2});console.log(a.getIn(["c","d"])),console.log(a.getIn(["c"]).toJS());var o=a.setIn(["c","d"],3);console.log(a.toJS()),console.log(o.toJS())}},{key:"render",value:function(){var e=this,t=this.state,n=t.username,a=t.password,l=t.visible;return o.a.createElement("div",null,o.a.createElement("div",null,"\u59d3\u540d\uff1a",o.a.createElement("input",{value:n,onChange:function(t){return e.handleInput(t,"username")},placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d",autoFocus:!0})),o.a.createElement("div",null,"\u5bc6\u7801\uff1a",o.a.createElement("input",{value:a,onChange:function(t){return e.handleInput(t,"password")},placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801",type:l?"text":"password",onKeyUp:function(t){return e.handleKeyUp(t)}}),o.a.createElement(g,{type:l?"xianshimima":"buxianshimima",className:"m-login-icon",onClick:function(){return e.handelVisible()}})),o.a.createElement("button",{onClick:function(){return e.handleLogin()}},"\u767b\u5f55"))}}]),t}(a.Component),w=Object(i.b)((function(e){return{listAll:e.getIn(["listAll"]).toJS(),title:e.getIn(["title"])}}),(function(e){return{onSetState:function(t,n){e({type:"SET_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))((function(e){var t=e.title;return o.a.createElement("div",{className:"m-header"},t)})),A=function(){return o.a.createElement("div",{className:"m-footer"},o.a.createElement(c.b,{to:"/index/home",className:"m-footer-item"},o.a.createElement(g,{type:"shouye",className:"m-footer-item-icon"}),o.a.createElement("div",{className:"m-footer-item-text"},"\u9996\u9875")),o.a.createElement(c.b,{to:"/index/my_book",className:"m-footer-item"},o.a.createElement(g,{type:"shubao",className:"m-footer-item-icon"}),o.a.createElement("div",{className:"m-footer-item-text"},"\u4e66\u5305")),o.a.createElement(c.b,{to:"/index/me",className:"m-footer-item"},o.a.createElement(g,{type:"wode",className:"m-footer-item-icon"}),o.a.createElement("div",{className:"m-footer-item-text"},"\u6211\u7684")))},x=function(){return function(e){N.getListAll().then((function(t){200===t.code&&e({type:"SET_STATE",key:["listAll"],value:t.data})}))}},T=Object(i.b)((function(e){return{listAll:e.getIn(["listAll"]).toJS(),currentId:e.getIn(["currentId"])}}),(function(e){return{onSetState:function(t,n){e({type:"SET_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))((function(e){Object(a.useEffect)((function(){e.onDispatch(x())}),[]);var t=e.listAll,n=e.currentId,l=t.map((function(t){return o.a.createElement("div",{key:t.id,className:"m-sidebar-item "+(n===t.id?"active":""),onClick:function(){return n=t.id,console.log(n),void e.onSetState(["currentId"],n);var n}},t.title)}));return o.a.createElement("div",{className:"m-sidebar"},l)})),C=Object(i.b)((function(e){return{listAll:e.getIn(["listAll"]).toJS(),currentId:e.getIn(["currentId"])}}),(function(e){return{onSetState:function(t,n){e({type:"SET_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))((function(e){var t=e.listAll.map((function(e){return o.a.createElement("div",{key:e.id},o.a.createElement("div",{className:"m-category-title"},e.title),e.list.map((function(e){return o.a.createElement("div",{key:e.id,className:"m-list-item"},o.a.createElement("div",{className:"m-list-img-wrap"},o.a.createElement("img",{src:e.avatar,className:"m-list-img"})),o.a.createElement("div",{className:"m-list-info"},e.title))})))}));return o.a.createElement("div",{className:"m-list"},t)})),J=function(){return o.a.createElement("div",{className:"m-main m-home"},o.a.createElement(T,null),o.a.createElement(C,null))},_=function(){return o.a.createElement("div",{className:"m-main"},"myBook")},D=function(){return o.a.createElement("div",{className:"m-main"},"\u6211\u7684")},L=Object(i.b)((function(e){return{}}),(function(e){return{onSetState:function(t,n){e({type:"SET_STATE",key:t,value:n})},onDispatch:function(t){e(t)}}}))((function(e){var t=function(t,n){return e.onSetState(["title"],n),t};return o.a.createElement("div",{className:"m-wrap"},o.a.createElement(w,null),o.a.createElement(p.d,null,o.a.createElement(p.b,{path:"/index/home",render:function(){return t(o.a.createElement(J,null),"\u5c0f\u7c73\u4e66\u57ce")}}),o.a.createElement(p.b,{path:"/index/my_book",render:function(){return t(o.a.createElement(_,null),"\u6211\u7684\u4e66\u5305")}}),o.a.createElement(p.b,{path:"/index/me",render:function(){return t(o.a.createElement(D,null),"\u4e2a\u4eba\u4e2d\u5fc3")}})),o.a.createElement(A,null))})),B=function(e){function t(){return Object(s.a)(this,t),Object(m.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.d,null,o.a.createElement(p.a,{from:"/",to:"/login",exact:!0}),o.a.createElement(p.b,{path:"/login",component:I}),o.a.createElement(p.b,{path:"/index",component:L})))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=n(13),U=Object(O.a)({listAll:[],currentId:0,title:"\u5c0f\u7c73\u4e66\u57ce"}),F=Object(K.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_STATE":return e.setIn(t.key,Object(O.a)(t.value));default:return e}}),Object(K.a)((function(e){var t=e.dispatch,n=e.getState;return function(e){return function(a){return"function"===typeof a?a(t,n):e(a)}}})));n(70),n(71);r.a.render(o.a.createElement(i.a,{store:F},o.a.createElement(c.a,null,o.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[42,1,2]]]);
//# sourceMappingURL=main.cbf05f3b.chunk.js.map