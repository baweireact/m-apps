(function(t){function e(e){for(var o,i,u=e[0],c=e[1],s=e[2],l=0,f=[];l<u.length;l++)i=u[l],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&f.push(r[i][0]),r[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);d&&d(e);while(f.length)f.shift()();return a.push.apply(a,s||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],o=!0,i=1;i<n.length;i++){var c=n[i];0!==r[c]&&(o=!1)}o&&(a.splice(e--,1),t=u(u.s=n[0]))}return t}var o={},r={app:0},a=[];function i(t){return u.p+"js/"+({}[t]||t)+"."+{"chunk-27ab0e03":"225a6bb7","chunk-2d0ae607":"61f5e9d2","chunk-2d2086b7":"08162457","chunk-45e2d16a":"868da1e5"}[t]+".js"}function u(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,u),n.l=!0,n.exports}u.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,o){n=r[t]=[e,o]}));e.push(n[2]=o);var a,c=document.createElement("script");c.charset="utf-8",c.timeout=120,u.nc&&c.setAttribute("nonce",u.nc),c.src=i(t);var s=new Error;a=function(e){c.onerror=c.onload=null,clearTimeout(l);var n=r[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),a=e&&e.target&&e.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}r[t]=void 0}};var l=setTimeout((function(){a({type:"timeout",target:c})}),12e4);c.onerror=c.onload=a,document.head.appendChild(c)}return Promise.all(e)},u.m=t,u.c=o,u.d=function(t,e,n){u.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},u.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(t,e){if(1&e&&(t=u(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(u.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)u.d(n,o,function(e){return t[e]}.bind(null,o));return n},u.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return u.d(e,"a",e),e},u.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},u.p="/",u.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],s=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=s;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"365c":function(t,e,n){"use strict";n("96cf");var o=n("1da1"),r=n("bc3a"),a=n.n(r),i={login:"/api/login",list:"/api/list",myBooks:"/api/my_books"},u=i;var c=function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,a()(e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),s={login:function(t){return c({url:u.login,data:t,method:"post"})},list:function(){return c({url:u.list})},myBooks:function(t,e){return c({url:u.myBooks,data:t,method:e})}};e["a"]=s},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},a=[],i=n("2877"),u={},c=Object(i["a"])(u,r,a,!1,null,null,null),s=c.exports,l=(n("d3b7"),n("8c4f")),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-wrap"},[n("Header"),n("router-view"),n("Footer")],1)},f=[],m=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-header"},[t._v(" "+t._s(t.title)+" ")])},p=[],h={computed:{title:function(){return this.$store.state.title}}},v=h,b=Object(i["a"])(v,m,p,!1,null,null,null),y=b.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-footer"},[n("router-link",{staticClass:"m-footer-item",attrs:{to:"/index/home"}},[n("Icon",{staticClass:"m-footer-icon",attrs:{name:"shouye"}}),n("div",{staticClass:"m-footer-text"},[t._v("首页")])],1),n("router-link",{staticClass:"m-footer-item",attrs:{to:"/index/my_books"}},[n("Badge",{attrs:{count:t.count}},[n("Icon",{staticClass:"m-footer-icon",attrs:{name:"shubao"}})],1),n("div",{staticClass:"m-footer-text"},[t._v("书包")])],1),n("router-link",{staticClass:"m-footer-item",attrs:{to:"/index/me"}},[n("Icon",{staticClass:"m-footer-icon",attrs:{name:"wodedangxuan"}}),n("div",{staticClass:"m-footer-text"},[t._v("我的")])],1)],1)},k=[],_=(n("13d5"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-badge-wrap"},[t._t("default"),t.formatCount>0||"string"===typeof t.formatCount?n("span",{staticClass:"m-badge"},[t._v(t._s(t.formatCount))]):t._e()],2)}),w=[],x=(n("a9e3"),{props:{count:{type:Number}},computed:{formatCount:function(){return this.count<100?this.count:"99+"}}}),C=x,j=Object(i["a"])(C,_,w,!1,null,null,null),O=j.exports,$=n("cdae"),S=n("365c"),B={computed:{count:function(){var t=this.$store.state.myBooks,e=t.reduce((function(t,e){return t+e.count}),0);return e}},components:{Badge:O,Icon:$["a"]},mounted:function(){this.$store.dispatch({type:"myBooks",data:null,method:"get"})}},E=B,P=Object(i["a"])(E,g,k,!1,null,null,null),I=P.exports,T={components:{Header:y,Footer:I}},L=T,M=Object(i["a"])(L,d,f,!1,null,null,null),N=M.exports,R=n("2f62");o["a"].use(R["a"]);var F=new R["a"].Store({state:{title:"小米书城",list:[],currentId:0,isRealScroll:!0,myBooks:[]},mutations:{setState:function(t,e){t[e.key]=e.value}},actions:{getList:function(t){var e=t.commit;S["a"].list().then((function(t){200===t.code&&e({type:"setState",key:"list",value:t.data})}))},myBooks:function(t,e){var n=t.commit;S["a"].myBooks(e.data,e.method).then((function(t){200===t.code&&(n({type:"setState",key:"myBooks",value:t.data}),e.callback&&e.callback())}))}},modules:{}});o["a"].use(l["a"]);var H=[{path:"/",redirect:"/login"},{path:"/login",component:function(){return n.e("chunk-2d2086b7").then(n.bind(null,"a55b"))}},{path:"/index",component:N,meta:{isNeedLogin:!0},children:[{path:"/index/home",component:function(){return n.e("chunk-27ab0e03").then(n.bind(null,"bb51"))},meta:{title:"小米书城"}},{path:"/index/my_books",component:function(){return n.e("chunk-45e2d16a").then(n.bind(null,"9e2c"))},meta:{title:"我的书包"}},{path:"/index/me",component:function(){return n.e("chunk-2d0ae607").then(n.bind(null,"0a99"))},meta:{title:"个人中心"}}]}],J=new l["a"]({mode:"history",base:"/",routes:H});J.beforeEach((function(t,e,n){F.commit({type:"setState",key:"title",value:t.meta.title}),t.matched[0].meta.isNeedLogin?localStorage.getItem("token")?n():n({path:"/login"}):n()}));var q=J,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-wrap",attrs:{id:t.id}},[n("div",{staticClass:"m-message"},[t._v(" "+t._s(t.message)+" ")])])},D=[],z={data:function(){return{id:Date.now(),message:"消息",duration:3e3}},mounted:function(){var t=this;setTimeout((function(){window.document.getElementById(t.id).remove()}),this.duration)}},G=z,K=(n("96e0"),Object(i["a"])(G,A,D,!1,null,"5980ba26",null)),Q=K.exports,U=o["a"].extend(Q),V=function(t){var e=new U({data:t}).$mount();document.body.append(e.$el)},W=V;n("cbcd"),n("a766");o["a"].config.productionTip=!1,o["a"].prototype.$message=W,new o["a"]({router:q,store:F,render:function(t){return t(s)}}).$mount("#app")},"96e0":function(t,e,n){"use strict";var o=n("e5e2"),r=n.n(o);r.a},a766:function(t,e,n){},cbcd:function(t,e,n){},cdae:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:["icon iconfont icon-"+t.name],on:{click:t.handleClick}})},r=[],a={props:{name:String},methods:{handleClick:function(){this.$emit("onClick")}}},i=a,u=n("2877"),c=Object(u["a"])(i,o,r,!1,null,null,null);e["a"]=c.exports},e5e2:function(t,e,n){}});
//# sourceMappingURL=app.2d2ff414.js.map