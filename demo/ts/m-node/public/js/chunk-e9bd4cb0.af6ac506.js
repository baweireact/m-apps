(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e9bd4cb0"],{"4df4":function(t,e,a){"use strict";var n=a("0366"),o=a("7b0b"),i=a("9bdd"),c=a("e95a"),l=a("50c4"),s=a("8418"),r=a("35a1");t.exports=function(t){var e,a,u,d,b,v,h=o(t),p="function"==typeof this?this:Array,f=arguments.length,O=f>1?arguments[1]:void 0,m=void 0!==O,j=r(h),k=0;if(m&&(O=n(O,f>2?arguments[2]:void 0,2)),void 0==j||p==Array&&c(j))for(e=l(h.length),a=new p(e);e>k;k++)v=m?O(h[k],k):h[k],s(a,k,v);else for(d=j.call(h),b=d.next,a=new p;!(u=b.call(d)).done;k++)v=m?i(d,O,[u.value,k],!0):u.value,s(a,k,v);return a.length=k,a}},a630:function(t,e,a){var n=a("23e7"),o=a("4df4"),i=a("1c7e"),c=!i((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:c},{from:o})},bb51:function(t,e,a){"use strict";a.r(e);var n,o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-main m-home"},[a("Sidebar"),a("List")],1)},i=[],c=a("d4ec"),l=a("bee2"),s=a("262e"),r=a("2caf"),u=a("9ab4"),d=a("60a3"),b=a("4bb5"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-sidebar"},t._l(t.list,(function(e){return a("div",{key:e.id,class:["m-sidebar-item "+(t.currentId===e.id?"active":"")],on:{click:function(a){return t.handleNav(e.id)}}},[t._v(" "+t._s(e.title)+" ")])})),0)},h=[],p=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"handleNav",value:function(t){var e=this;this.setState({key:"currentId",value:t}),document.getElementById(t+"").scrollIntoView({block:"start",behavior:"smooth"}),clearTimeout(n),this.setState({key:"isRealScroll",value:!1}),n=setTimeout((function(){e.setState({key:"isRealScroll",value:!0})}),1e3)}}]),a}(d["e"]);Object(u["a"])([Object(b["c"])((function(t){return t.list}))],p.prototype,"list",void 0),Object(u["a"])([Object(b["c"])((function(t){return t.currentId}))],p.prototype,"currentId",void 0),Object(u["a"])([Object(b["b"])("setState")],p.prototype,"setState",void 0),p=Object(u["a"])([d["a"]],p);var f=p,O=f,m=a("2877"),j=Object(m["a"])(O,v,h,!1,null,null,null),k=j.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-list",on:{scroll:t.handleScoll}},[t._l(t.list,(function(e){return a("div",{key:e.id,staticClass:"js-list-item",attrs:{id:e.id}},[a("div",{staticClass:"m-category-title"},[t._v(t._s(e.title))]),t._l(e.list,(function(e){return a("div",{key:e.id,staticClass:"m-list-item",on:{click:function(a){return t.handleDetail(e.id)}}},[a("div",{staticClass:"m-img-wrap"},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.avatar,expression:"book.avatar"}],staticClass:"m-img"})]),a("div",{staticClass:"m-list-info"},[a("div",[t._v(t._s(e.title))]),a("Stars",{attrs:{count:e.stars}}),a("button",{on:{click:function(a){return a.stopPropagation(),t.handleShowDialog(e)}}},[t._v("添加")])],1)])}))],2)})),a("Dialog",{attrs:{title:"添加",visible:t.visible},on:{onCancel:t.handleCancel,onOk:t.handleAddToMyBooks},scopedSlots:t._u([{key:"content",fn:function(){return[a("div",{staticClass:"m-add-wrap"},[a("div",{staticClass:"m-add-info"},[a("button",{staticClass:"m-btn",on:{click:t.handleSub}},[t._v("减")]),a("input",{staticClass:"m-input",attrs:{type:"text",placeholder:"数量"},domProps:{value:t.book.count},on:{input:t.handleInput}}),a("button",{staticClass:"m-btn",on:{click:t.handleAdd}},[t._v("加")])])])]},proxy:!0}])})],2)},C=[],_=(a("a630"),a("d81d"),a("ac1f"),a("3ca3"),a("5319"),a("5530")),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(5,(function(e){return a("Icon",{key:e,class:["m-star "+(e<=t.count?"active":"")],attrs:{name:"star"}})})),1)},S=[],w=a("cdae"),A=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return a}(d["e"]);Object(u["a"])([Object(d["c"])()],A.prototype,"count",void 0),A=Object(u["a"])([Object(d["a"])({components:{Icon:w["a"]}})],A);var I=A,x=I,B=Object(m["a"])(x,g,S,!1,null,null,null),E=B.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{class:["m-dialog-wrap "+(t.visible?"active":"")]},[a("div",{staticClass:"m-dialog"},[a("div",{staticClass:"m-dialog-header"},[t._v(t._s(t.title))]),a("div",{staticClass:"m-dialog-content"},[t._t("content")],2),a("div",{staticClass:"m-dialog-footer"},[a("button",{staticClass:"m-btn",on:{click:t.handleCancel}},[t._v("取消")]),a("button",{staticClass:"m-btn",on:{click:t.handleOk}},[t._v("确定")])])])])},T=[],$=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"handleCancel",value:function(){}},{key:"handleOk",value:function(){}}]),a}(d["e"]);Object(u["a"])([Object(d["c"])()],$.prototype,"visible",void 0),Object(u["a"])([Object(d["c"])()],$.prototype,"title",void 0),Object(u["a"])([Object(d["b"])("onCancel")],$.prototype,"handleCancel",null),Object(u["a"])([Object(d["b"])("onOk")],$.prototype,"handleOk",null),$=Object(u["a"])([d["a"]],$);var R=$,N=R,z=Object(m["a"])(N,D,T,!1,null,null,null),J=z.exports,L=[],M=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){var t;return Object(c["a"])(this,a),t=e.apply(this,arguments),t.visible=!1,t.book={count:1},t}return Object(l["a"])(a,[{key:"handleScoll",value:function(t){var e=t.target.scrollTop;if(e+=40,this.isRealScroll)for(var a=0;a<L.length-1;a++)L[a]<e&&e<L[a+1]&&this.setState({key:"currentId",value:a})}},{key:"handleShowDialog",value:function(t){this.visible=!0,t.count=1,this.book=t}},{key:"handleCancel",value:function(){this.visible=!1}},{key:"handleAddToMyBooks",value:function(){this.book.checked=!0,this.myBooksAction({data:{book:this.book},method:"post",callback:this.handleCancel})}},{key:"handleAdd",value:function(){this.book.count++,this.book=Object(_["a"])({},this.book)}},{key:"handleSub",value:function(){this.book.count>1&&(this.book.count--,this.book=Object(_["a"])({},this.book))}},{key:"handleInput",value:function(t){var e=t.target.value.replace(/[^\d]/g,"")-0;0===e&&(e=1),this.book.count=e,this.book=Object(_["a"])({},this.book)}},{key:"handleDetail",value:function(t){this.$router.push("/detail/".concat(t))}},{key:"updated",value:function(){L=Array.from(document.getElementsByClassName("js-list-item")).map((function(t){return t.offsetTop})),L.push(1/0),console.log(L)}}]),a}(d["e"]);Object(u["a"])([Object(b["c"])((function(t){return t.list}))],M.prototype,"list",void 0),Object(u["a"])([Object(b["c"])((function(t){return t.isRealScroll}))],M.prototype,"isRealScroll",void 0),Object(u["a"])([Object(b["b"])("setState")],M.prototype,"setState",void 0),Object(u["a"])([Object(b["a"])("myBooksAction")],M.prototype,"myBooksAction",void 0),M=Object(u["a"])([Object(d["a"])({components:{Stars:E,Dialog:J}})],M);var P=M,V=P,q=Object(m["a"])(V,y,C,!1,null,null,null),F=q.exports,G=function(t){Object(s["a"])(a,t);var e=Object(r["a"])(a);function a(){return Object(c["a"])(this,a),e.apply(this,arguments)}return Object(l["a"])(a,[{key:"mounted",value:function(){this.list()}}]),a}(d["e"]);Object(u["a"])([Object(b["a"])("list")],G.prototype,"list",void 0),G=Object(u["a"])([Object(d["a"])({components:{Sidebar:k,List:F}})],G);var H=G,K=H,Q=Object(m["a"])(K,o,i,!1,null,null,null);e["default"]=Q.exports},d81d:function(t,e,a){"use strict";var n=a("23e7"),o=a("b727").map,i=a("1dde"),c=a("ae40"),l=i("map"),s=c("map");n({target:"Array",proto:!0,forced:!l||!s},{map:function(t){return o(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-e9bd4cb0.af6ac506.js.map